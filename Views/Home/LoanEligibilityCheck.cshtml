@using NBFC_App___dev.Models;
@{
    ViewBag.Title = "LoanEligibilityCheck";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<style>
    h2 {
        text-align:center;
    }
</style>
    <div class="container">
        <div style="position: relative center;">
            <h2>Loan Eligibility Calculator</h2>
        </div>
        <br />
        <br />
        <br />
        <form method="post" action="~/Home/GetLoanEligibilityResult">
            <div class="row">
                <div class="col-sm-2">
                    <h4 class="title fs-title" id="header">Loan Amount</h4>
                </div>
                <div class="col-sm-10">
                    <input id="loanAmount" name="loanAmount" class="form-control form-input inp loanamount" />
                </div>
            </div>
            <div id="cont">
                <div id="left"><label>10000</label></div>
                <div id="right"><label>300000</label></div>
            </div>
            <div class="slidecontainer">
                <input id="myRange" type="range" class="slider" min="10000" max="300000" runat="server" />
            </div>
            <br />
            <br />
            <div class="row">
                <div class="col-sm-2">
                    <h4 class="title fs-title" id="header">Monthly Income</h4>
                </div>
                <div class="col-sm-10">
                    <input id="MonthlyIncome" name="monthlyIncome" class="form-control form-input inp loanamount" />
                </div>
            </div>
            <div id="cont">
                <div id="left"><label>10000</label></div>
                <div id="right"><label>100000</label></div>
            </div>
            <div class="slidecontainer">
                <input id="myRangeIncome" type="range" class="slider" min="10000" max="100000" runat="server" />
            </div>
            @*<input id="LoanAmount" class="form-control form-input inp" placeholder="Loan Amount" name="loanAmount">*@
            @*<input id="MonthlyIncome" class="form-control form-input inp" placeholder="Net Monthly Income" name="monthlyIncome">*@
            <br />
            <br />
            <div class="row">
                <div class="col-md-6">
                    <label class="label_inp" for="loanType" id="label_loanType_select">Loan Type</label>
                    <select id="loanType" class="form-control form-input" required>
                        <option value="-1">Loan Type</option>
                        <option value="Short Term Loan">Short Term Loan</option>
                        <option value="Long Term Loan">Long Term Loan</option>
                    </select>
                </div>
                <div class="col-md-6">
                    <label class="label_inp" for="LoanTenure" id="label_LoanTenure_select">Loan Tenure</label>
                    <input id="LoanTenure" class="form-control form-input inp" placeholder="Loan Tenure" name="Tenure">
                </div>
            </div>
            <div class="row">
                <div class="col-md-6" style="margin-top: 25px;">
                    <label class="label_inp" for="birthdate" id="label_birthdate_select">Date of Birth</label>
                    <input type="date" id="birthdate" class="form-control form-input inp" placeholder="Date of Birth" name="birthdate" />
                </div>
                <div class="col-md-6" style="margin-top: 25px;">
                    <label class="label_inp" for="sel_prd" id="label_sel_prd_select">Loan</label>
                    <select id="sel_prd" class="form-control form-input" required>
                        <option value="-1" selected>Select Loan</option>
                        @if (ViewData["ProductsData"] != null)
                        {
                            foreach (var prdct in (IEnumerable<Products>)ViewData["ProductsData"])
                            {
                                <option value="@prdct.id">@prdct.name</option>
                            }
                        }
                    </select>
                </div>
            </div>
            <br />
            <div class="row">
                <div class="col-md-6">
                    <input id="submit" class="btn btn-primary btn-default" type="submit" data-toggle="modal" data-target="#waituploadModal" value="Submit" />
                </div>
            </div>
            <input hidden id="productId" class="form-control form-input" placeholder="" value=@ViewData["ProductId"] name="auto_product_id" />
            <input hidden id="product_name" class="form-control form-input" placeholder="Loan" value="@ViewData["ProductId"]" name="prdct_id" />
            <input hidden id="typeofloan" class="form-control form-input" placeholder="Loan" name="loan" />
        </form>
        <div class="modal fade" id="waituploadModal" role="dialog">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4 class="modal-title"></h4>
                    </div>
                    <div class="modal-body">
                        <div>
                            <div style="position: relative;">
                                <h4 style="text-align: center;">Checking your Eligibility</h4>
                            </div>
                            <br />
                            <div class="container-fluid">
                                <div class="d-flex justify-content-center">
                                    <div class="spinner-border" role="status">
                                        <span class="sr-only">Loading...</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
        <br />
        <br />
        <div style="position: relative center;">
            @if (ViewData["Result"] != null)
            {
                <h2 class="congrats_class">Congratulations! You are Eligible for @ViewData["ProductName"].ToString()</h2>
                <div class="row" style="text-align: center;">
                    <input type="button" class="btn btn-primary defaultButton" style="position: relative center;" value="Apply For Loan" onclick="location.href='@Url.Content("~/personal.aspx")'" />
                </div>
            }
            else if (ViewData["Options"] != null)
            {
                <h2>Sorry! You are Eligible for below loans but not for @ViewData["ProductName"].ToString()</h2>
                <br />
                <br />
                <table class="table">
                    <thead>
                        <tr style="background: powderblue;">
                            <th scope="col">Name</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var prd in (IEnumerable<Products>)ViewData["Options"])
                        {
                            <tr class="table_row">
                                <td>@Html.ActionLink(@prd.name, "ProductsInfo", new { Id = @prd.id })</td>
                            </tr>
                        }
                    </tbody>
                </table>
            }
        </div>
    </div>

@Scripts.Render("~/Scripts/about.js")

